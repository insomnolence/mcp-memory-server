{
  "_comment": "Example configuration file - copy to config.json and modify as needed",
  "database": {
    "persist_directory": "./data/memory",
    "collections": {
      "short_term": "short_term_memory",
      "long_term": "long_term_memory"
    }
  },
  "embeddings": {
    "model_name": "sentence-transformers/all-MiniLM-L6-v2",
    "chunk_size": 1000,
    "chunk_overlap": 100
  },
  "reranker": {
    "model_name": "cross-encoder/ms-marco-MiniLM-L-6-v2"
  },
  "memory_scoring": {
    "_comment": "Time in seconds for decay constant (86400 = 1 day)",
    "decay_constant": 86400,
    "max_access_count": 100,
    "importance_threshold": 0.7,
    "scoring_weights": {
      "_comment": "Weights for retrieval scoring (must sum to 1.0)",
      "semantic": 0.4,
      "recency": 0.3,
      "frequency": 0.2,
      "importance": 0.1
    },
    "base_scoring": {
      "_comment": "Base content scoring parameters",
      "length_normalization": 1000,
      "max_length_score": 1.0
    },
    "domain_patterns": {
      "_comment": "Configurable pattern matching system for any domain",
      "case_sensitive": false,
      "patterns": {
        "_comment_patterns": "Define custom patterns for your domain. Each pattern can have keywords and/or regex_patterns.",
        "high_value_content": {
          "_comment": "Example: High-value content patterns",
          "keywords": ["important", "critical", "breakthrough", "discovery", "insight"],
          "bonus": 0.4,
          "match_mode": "any"
        },
        "technical_content": {
          "_comment": "Example: Technical content patterns", 
          "keywords": ["analysis", "method", "algorithm", "implementation", "solution"],
          "regex_patterns": ["\\b(def|class|function)\\s+\\w+", "\\b(error|exception|failed)\\b"],
          "bonus": 0.3,
          "match_mode": "any"
        },
        "learning_insights": {
          "_comment": "Example: Learning and discovery patterns",
          "keywords": ["learned", "discovered", "realized", "understood", "found"],
          "bonus": 0.2,
          "match_mode": "any"
        },
        "domain_specific": {
          "_comment": "Example: Replace with your domain keywords (business: 'revenue', 'client'; research: 'hypothesis', 'evidence'; cooking: 'recipe', 'technique')",
          "keywords": ["placeholder_keyword"],
          "bonus": 0.25,
          "match_mode": "any"
        }
      },
      "permanence_triggers": {
        "_comment_permanence": "Patterns that trigger permanence boosts for long-term retention",
        "major_breakthrough": {
          "_comment": "Major discoveries or breakthroughs",
          "keywords": ["breakthrough", "major discovery", "significant finding", "key insight"],
          "boost": 0.25
        },
        "critical_information": {
          "_comment": "Critical or essential information",
          "keywords": ["critical", "essential", "must remember", "fundamental"],
          "boost": 0.2
        },
        "reference_material": {
          "_comment": "Reference documentation or procedures",
          "keywords": ["documentation", "procedure", "reference", "guide", "manual"],
          "boost": 0.15
        },
        "user_explicit_permanent": {
          "_comment": "Explicit permanence request from user",
          "boost": 0.25
        }
      }
    },
    "content_scoring": {
      "_comment": "LEGACY: Backward compatibility - will be removed in future versions",
      "code_bonus": 0.3,
      "error_bonus": 0.2,
      "language_bonus": 0.1,
      "solution_bonus": 0.3,
      "important_bonus": 0.2
    }
  },
  "memory_management": {
    "short_term_max_size": 100,
    "maintenance_interval_hours": 1,
    "stats_interval_hours": 24,
    "query_monitoring": {
      "_comment": "Phase 2: Query performance monitoring configuration",
      "history_size": 1000,
      "track_user_satisfaction": true,
      "enable_real_time_metrics": true,
      "aggregation_intervals": {
        "hourly": 3600,
        "daily": 86400
      },
      "performance_thresholds": {
        "fast_query_ms": 100,
        "slow_query_ms": 1000,
        "good_result_quality": 0.8
      }
    }
  },
  "lifecycle": {
    "_comment": "Phase 3: Lifecycle Management & TTL Configuration",
    "ttl": {
      "_comment": "TTL tiers in seconds (5min, 1hr, 1day, 1week) with jitter",
      "high_frequency_base": 300,
      "high_frequency_jitter": 60,
      "medium_frequency_base": 3600,
      "medium_frequency_jitter": 600,
      "low_frequency_base": 86400,
      "low_frequency_jitter": 7200,
      "static_base": 604800,
      "static_jitter": 86400
    },
    "aging": {
      "_comment": "Memory aging and decay functions",
      "enabled": true,
      "decay_rate": 0.1,
      "minimum_score": 0.1,
      "refresh_threshold_days": 7.0
    },
    "maintenance": {
      "_comment": "Background maintenance scheduling",
      "enabled": true,
      "cleanup_interval_hours": 1,
      "statistics_interval_hours": 24,
      "deep_maintenance_interval_hours": 168
    },
    "progressive_cleanup": {
      "_comment": "Phase 2: Progressive cleanup configuration for multi-phase maintenance",
      "daily": {
        "interval_hours": 24,
        "max_processing_time_seconds": 30,
        "duplicate_threshold": 0.95,
        "enabled": true
      },
      "weekly": {
        "interval_hours": 168,
        "max_processing_time_seconds": 300,
        "similarity_threshold": 0.75,
        "enabled": true
      },
      "monthly": {
        "interval_hours": 720,
        "max_processing_time_seconds": 1800,
        "deep_analysis_enabled": true,
        "enabled": true
      }
    }
  },
  "server": {
    "host": "127.0.0.1",
    "port": 8080,
    "title": "Advanced Project Memory MCP Server",
    "version": "2.0.0",
    "protocol_version": "2025-06-18"
  },
  "deduplication": {
    "_comment": "Memory deduplication configuration based on docs/memory-deduplication-proposal.md",
    "enabled": true,
    "similarity_threshold": 0.95,
    "min_importance_diff": 0.1,
    "preserve_high_access": true,
    "collections": ["short_term", "long_term"],
    "batch_processing": {
      "enabled": true,
      "interval_hours": 6,
      "max_documents_per_batch": 1000
    },
    "ingestion_checking": {
      "enabled": true,
      "quick_threshold": 0.95
    },
    "advanced_features": {
      "_comment": "Phase 3: Advanced deduplication features with domain awareness and semantic clustering",
      "domain_awareness": {
        "enabled": true,
        "domain_thresholds": {
          "code": 0.98,
          "text": 0.92,
          "data": 0.96,
          "documentation": 0.90
        },
        "classification_keywords": {
          "code": ["function", "def", "class", "import", "return", "if", "for", "while", "{", "}", "()", "[]"],
          "text": ["the", "and", "or", "but", "however", "therefore", "because", "since"],
          "data": ["data", "json", "csv", "table", "row", "column", "field", "value", "record"],
          "documentation": ["readme", "guide", "manual", "documentation", "howto", "tutorial", "example"]
        }
      },
      "semantic_clustering": {
        "enabled": true,
        "max_clusters": 20,
        "min_cluster_size": 3,
        "similarity_threshold_clustering": 0.85,
        "clustering_algorithm": "graph_based",
        "performance_mode": "balanced"
      },
      "threshold_optimization": {
        "enabled": true,
        "auto_optimize": false,
        "optimization_interval_hours": 168,
        "min_data_points": 100,
        "effectiveness_weight": 0.7,
        "performance_weight": 0.3,
        "learning_rate": 0.01
      },
      "performance_tracking": {
        "enabled": true,
        "track_effectiveness": true,
        "track_performance_impact": true,
        "retention_days": 30
      }
    }
  },
  "analytics": {
    "_comment": "Phase 3: Comprehensive analytics and intelligence system configuration",
    "enabled": true,
    "predictive_analytics": {
      "enabled": true,
      "prediction_horizon_days": 7,
      "min_historical_data_days": 30,
      "confidence_threshold": 0.7
    },
    "intelligence_system": {
      "enabled": true,
      "analysis_depth": "comprehensive",
      "roi_scoring_enabled": true,
      "optimization_recommendations": true,
      "trend_analysis_enabled": true
    },
    "caching": {
      "enabled": true,
      "cache_duration_minutes": 15,
      "max_cache_size": 100
    },
    "performance_monitoring": {
      "track_generation_time": true,
      "track_resource_usage": true,
      "alert_on_slow_analytics": true,
      "slow_threshold_seconds": 5.0
    }
  },
  "chunk_relationships": {
    "_comment": "Phase 3: Chunk relationship management configuration", 
    "enabled": true,
    "context_window_size": 2,
    "track_deduplication_history": true,
    "preserve_document_structure": true,
    "relationship_cache_size": 1000,
    "enable_cross_document_relationships": true
  },
  "logging": {
    "level": "INFO",
    "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    "file": "logs/mcp_server.log"
  }
}